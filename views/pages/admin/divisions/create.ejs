<!-- Breadcrumb -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item"><a href="<%= base %>dashboard">Dashboard</a></li>
        <li class="breadcrumb-item"><a href="#">Admin</a></li>
        <li class="breadcrumb-item"><a href="<%= base %>admin/divisions">Divisions</a></li>
        <li class="breadcrumb-item active" aria-current="page">Create</li>
      </ol>
    </nav>
    <h1 class="h3 mb-0">Create New Division</h1>
  </div>
  <a href="<%= base %>admin/divisions" class="btn btn-secondary">
    <i class="bx bx-arrow-back"></i> Back to Divisions
  </a>
</div>

<!-- Create Form -->
<div class="card">
  <div class="card-body">
    <form method="POST" action="<%= base %>admin/divisions">
      <!-- Name -->
      <div class="mb-3">
        <label for="name" class="form-label">Division Name <span class="text-danger">*</span></label>
        <input 
          type="text" 
          class="form-control <%= locals.errors && errors.name ? 'is-invalid' : '' %>" 
          id="name" 
          name="name" 
          value="<%= locals.input ? input.name : '' %>"
          placeholder="Enter division name"
          required
        >
        <% if (locals.errors && errors.name) { %>
        <div class="invalid-feedback">
          <%= errors.name.message %>
        </div>
        <% } %>
      </div>

      <!-- Code -->
      <div class="mb-3">
        <label for="code" class="form-label">Division Code <span class="text-danger">*</span></label>
        <input 
          type="text" 
          class="form-control <%= locals.errors && errors.code ? 'is-invalid' : '' %>" 
          id="code" 
          name="code" 
          value="<%= locals.input ? input.code : '' %>"
          placeholder="e.g., HR, FIN, OPS"
          style="text-transform: uppercase;"
          required
        >
        <% if (locals.errors && errors.code) { %>
        <div class="invalid-feedback">
          <%= errors.code.message %>
        </div>
        <% } %>
        <div class="form-text">Use short uppercase codes (will be converted automatically)</div>
      </div>

      <!-- Description -->
      <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea 
          class="form-control" 
          id="description" 
          name="description" 
          rows="3"
          placeholder="Enter division description"
        ><%= locals.input ? input.description : '' %></textarea>
      </div>

      <!-- Status -->
      <div class="mb-3">
        <div class="form-check form-switch">
          <input 
            class="form-check-input" 
            type="checkbox" 
            id="isActive" 
            name="isActive"
            <%= (!locals.input || (locals.input && input.isActive === 'on')) ? 'checked' : '' %>
          >
          <label class="form-check-label" for="isActive">
            Active Status
          </label>
        </div>
        <div class="form-text">Active divisions can be assigned to users and roles</div>
      </div>

      <!-- Buttons -->
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">
          <i class="bx bx-save"></i> Create Division
        </button>
        <a href="<%= base %>admin/divisions" class="btn btn-secondary">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>

<script>
// Auto uppercase code field
document.getElementById('code').addEventListener('input', function(e) {
  e.target.value = e.target.value.toUpperCase();
});
</script>