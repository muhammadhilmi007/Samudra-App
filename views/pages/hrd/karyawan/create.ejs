<div class="container-fluid mt-30">
  <div class="row">
    <div class="col-lg-12">
      <div class="breadcrumb-main">
        <h4 class="text-capitalize breadcrumb-title">Create Employee</h4>
        <div class="breadcrumb-action justify-content-center flex-wrap">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a href="<%= locals.base %>dashboard/analytics/<%- locale %>"><i class="las la-home"></i>Dashboard</a>
              </li>
              <li class="breadcrumb-item">
                <a href="<%= locals.base %>administrasi/employees/index/<%- locale %>">Employees</a>
              </li>
              <li class="breadcrumb-item active" aria-current="page">Create</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h6>Employee Information</h6>
        </div>
        <div class="card-body">
          <form method="POST" action="<%= locals.base %>administrasi/employees/create/<%- locale %>" enctype="multipart/form-data">
            <div class="row">
              <!-- Personal Information -->
              <div class="col-md-6">
                <h6 class="mb-3">Personal Information</h6>
                
                <div class="mb-3">
                  <label for="firstname" class="form-label">First Name <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="firstname" name="firstname" required>
                </div>
                
                <div class="mb-3">
                  <label for="lastname" class="form-label">Last Name</label>
                  <input type="text" class="form-control" id="lastname" name="lastname">
                </div>
                
                <div class="mb-3">
                  <label for="username" class="form-label">Username <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="username" name="username" required>
                </div>
                
                <div class="mb-3">
                  <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                  <input type="email" class="form-control" id="email" name="email" required>
                </div>
                
                <div class="mb-3">
                  <label for="password" class="form-label">Password <span class="text-danger">*</span></label>
                  <input type="password" class="form-control" id="password" name="password" required>
                  <div class="form-text">Minimum 8 characters</div>
                </div>
                
                <div class="mb-3">
                  <label for="birthdate" class="form-label">Birth Date <span class="text-danger">*</span></label>
                  <input type="date" class="form-control" id="birthdate" name="birthdate" required>
                </div>
                
                <div class="mb-3">
                  <label for="gender" class="form-label">Gender <span class="text-danger">*</span></label>
                  <select class="form-control" id="gender" name="gender" required>
                    <option value="">Select Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                  </select>
                </div>
                
                <div class="mb-3">
                  <label for="maritalStatus" class="form-label">Marital Status</label>
                  <select class="form-control" id="maritalStatus" name="maritalStatus">
                    <option value="Single">Single</option>
                    <option value="Married">Married</option>
                    <option value="Divorced">Divorced</option>
                    <option value="Widowed">Widowed</option>
                  </select>
                </div>
              </div>
              
              <!-- Contact & Address -->
              <div class="col-md-6">
                <h6 class="mb-3">Contact Information</h6>
                
                <div class="mb-3">
                  <label for="noPhone" class="form-label">Phone Number (WhatsApp) <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="noPhone" name="noPhone" required>
                </div>
                
                <div class="mb-3">
                  <label for="noPhoneEmergency" class="form-label">Emergency Contact <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="noPhoneEmergency" name="noPhoneEmergency" required>
                </div>
                
                <div class="mb-3">
                  <label for="noPhoneContact" class="form-label">Alternative Phone</label>
                  <input type="text" class="form-control" id="noPhoneContact" name="noPhoneContact">
                </div>
                
                <h6 class="mb-3 mt-4">Address</h6>
                
                <div class="mb-3">
                  <label for="province" class="form-label">Province</label>
                  <select class="form-control" id="province" name="province">
                    <option value="">Select Province</option>
                  </select>
                </div>
                
                <div class="mb-3">
                  <label for="city" class="form-label">City</label>
                  <select class="form-control" id="city" name="city">
                    <option value="">Select City</option>
                  </select>
                </div>
                
                <div class="mb-3">
                  <label for="district" class="form-label">District</label>
                  <select class="form-control" id="district" name="district">
                    <option value="">Select District</option>
                  </select>
                </div>
                
                <div class="mb-3">
                  <label for="street" class="form-label">Street Address</label>
                  <textarea class="form-control" id="street" name="street" rows="2"></textarea>
                </div>
                
                <div class="mb-3">
                  <label for="postalCode" class="form-label">Postal Code</label>
                  <input type="text" class="form-control" id="postalCode" name="postalCode">
                </div>
              </div>
            </div>
            
            <hr class="my-4">
            
            <div class="row">
              <!-- Employment Information -->
              <div class="col-md-6">
                <h6 class="mb-3">Employment Information</h6>
                
                <div class="mb-3">
                  <label for="branchId" class="form-label">Branch <span class="text-danger">*</span></label>
                  <select class="form-control" id="branchId" name="branchId" required>
                    <option value="">Select Branch</option>
                    <% branches.forEach(branch => { %>
                    <option value="<%= branch._id %>"><%= branch.name %></option>
                    <% }) %>
                  </select>
                </div>
                
                <div class="mb-3">
                  <label for="divisionId" class="form-label">Division <span class="text-danger">*</span></label>
                  <select class="form-control" id="divisionId" name="divisionId" required>
                    <option value="">Select Division</option>
                    <% divisions.forEach(division => { %>
                    <option value="<%= division._id %>"><%= division.name %></option>
                    <% }) %>
                  </select>
                </div>
                
                <div class="mb-3">
                  <label for="positionId" class="form-label">Position <span class="text-danger">*</span></label>
                  <select class="form-control" id="positionId" name="positionId" required>
                    <option value="">Select Position</option>
                    <% positions.forEach(position => { %>
                    <option value="<%= position._id %>"><%= position.name %></option>
                    <% }) %>
                  </select>
                </div>
                
                <div class="mb-3">
                  <label for="supervisor" class="form-label">Supervisor</label>
                  <select class="form-control" id="supervisor" name="supervisor">
                    <option value="">Select Supervisor</option>
                    <% employees.forEach(emp => { %>
                    <option value="<%= emp._id %>"><%= emp.firstname %> <%= emp.lastname || '' %> (<%= emp.employeeCode %>)</option>
                    <% }) %>
                  </select>
                </div>
                
                <div class="mb-3">
                  <label for="joinDate" class="form-label">Join Date <span class="text-danger">*</span></label>
                  <input type="date" class="form-control" id="joinDate" name="joinDate" value="<%= new Date().toISOString().split('T')[0] %>" required>
                </div>
              </div>
              
              <!-- Documents -->
              <div class="col-md-6">
                <h6 class="mb-3">Documents</h6>
                
                <div class="mb-3">
                  <label for="noKTP" class="form-label">KTP Number <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="noKTP" name="noKTP" required>
                </div>
                
                <div class="mb-3">
                  <label for="noSIM" class="form-label">SIM Number</label>
                  <input type="text" class="form-control" id="noSIM" name="noSIM">
                </div>
                
                <div class="mb-3">
                  <label for="fotoKTP" class="form-label">KTP Photo</label>
                  <input type="file" class="form-control" id="fotoKTP" name="fotoKTP" accept="image/*">
                </div>
                
                <div class="mb-3">
                  <label for="fotoIdentitas" class="form-label">Identity Photo</label>
                  <input type="file" class="form-control" id="fotoIdentitas" name="fotoIdentitas" accept="image/*">
                </div>
                
                <div class="mb-3">
                  <label for="fotoProfile" class="form-label">Profile Photo</label>
                  <input type="file" class="form-control" id="fotoProfile" name="fotoProfile" accept="image/*">
                </div>
                
                <div class="mb-3">
                  <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="isActive" name="isActive" checked>
                    <label class="form-check-label" for="isActive">
                      Active Status
                    </label>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="d-flex justify-content-end gap-2">
              <a href="<%= locals.base %>administrasi/employees/index/<%- locale %>" class="btn btn-secondary">Cancel</a>
              <button type="submit" class="btn btn-primary">Create Employee</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="<%- locals.base %>js/wilayah-api.js"></script>
<script>
// Initialize wilayah dropdowns
document.addEventListener('DOMContentLoaded', function() {
  WilayahAPI.initializeDropdowns({
    province: '#province',
    city: '#city',
    district: '#district'
  });
});
</script>